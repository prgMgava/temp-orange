#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ  Pre-commit startting..."
branch="$(git rev-parse --abbrev-ref HEAD)"
echo "ğŸ”  Starting eslint..."
npx eslint --quiet $(git diff --diff-filter=d --name-only HEAD | xargs)
echo "âœ…  Eslint checking done"
npx pretty-quick --staged --verbose
if [ "$branch" = "main" ]; then
  echo -e "\nğŸ  You can't commit directly to main branch"
  echo -e "\nâŒ  Pre-commit failed!\n"
  exit 1
fi
echo -e "\nâœ¨  Pre-commit success!\n"
